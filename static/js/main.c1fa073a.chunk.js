(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(5),c=n.n(s),a=(n(15),n.p,n(16),n(3)),i=n.n(a),o=n(4),l=n(6),u=n(7),h=n(8),j=n(10),m=n(9);var d=n(0),b=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={movies:[],currSearchText:"",limit:4,genres:[{id:1,name:"All Genres"}],currentPage:1,cGenres:"All Genres"},e.deleteEntry=function(t){var n=e.state.movies.filter((function(e){return e._id!=t}));e.setState({movies:n})},e.setCurrentText=function(t){var n=t.target.value;e.setState({currSearchText:n})},e.sortByRating=function(t){var n,r=t.target.className,s=e.state.movies;n="fas fa-sort-up"==r?s.sort((function(e,t){return e.dailyRentalRate-t.dailyRentalRate})):s.sort((function(e,t){return t.dailyRentalRate-e.dailyRentalRate})),e.setState({movies:n})},e.sortByStock=function(t){var n,r=t.target.className.trim(),s=e.state.movies;n="fas fa-sort-up"==r?s.sort((function(e,t){return e.numberInStock-t.numberInStock})):s.sort((function(e,t){return t.numberInStock-e.numberInStock})),e.setState({movies:n})},e.changelimit=function(t){var n=t.target.value;n<1||e.setState({limit:n})},e.changeCurrentPage=function(t){e.setState({currentPage:t})},e.groupByGenres=function(t){e.setState({cGenres:t,currSearchText:""})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-backend101.herokuapp.com/movies");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,this.setState({movies:n.movies}),e.next=9,fetch("https://react-backend101.herokuapp.com/genres");case 9:return t=e.sent,e.next=12,t.json();case 12:r=e.sent,this.setState({genres:[].concat(Object(o.a)(this.state.genres),Object(o.a)(r.genres))});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.movies,r=t.currSearchText,s=t.limit,c=t.currentPage,a=(t.genres,t.cGenres),i=n;"All Genres"!=a&&(i=i.filter((function(e){return e.genre.name==a}))),""!=r&&(i=i.filter((function(e){return e.title.trim().toLowerCase().includes(r.toLowerCase())})));for(var o=Math.ceil(i.length/s),l=[],u=0;u<o;u++)l.push(u+1);var h=(c-1)*s,j=h+s;return i=i.slice(h,j),Object(d.jsxs)("div",{className:"row",children:["     ",Object(d.jsx)("div",{className:"col-3",children:Object(d.jsx)("ul",{class:"list-group",children:this.state.genres.map((function(t){return Object(d.jsx)("li",{class:"list-group-item",onClick:function(){e.groupByGenres(t.name)},children:t.name},t.id)}))})}),Object(d.jsxs)("div",{className:"col-9",children:[Object(d.jsx)("input",{type:"search",value:r,onChange:this.setCurrentText}),Object(d.jsx)("input",{type:"number",className:"col-1",placeholder:"no of elements/page",value:s,onChange:this.changelimit}),Object(d.jsxs)("table",{className:"table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",children:"Title"}),Object(d.jsx)("th",{scope:"col",children:"Genre"}),Object(d.jsxs)("th",{scope:"col",children:["Stock",Object(d.jsx)("i",{className:"fas fa-sort-up",onClick:this.sortByStock}),Object(d.jsx)("i",{className:"fas fa-sort-down",onClick:this.sortByStock})]}),Object(d.jsxs)("th",{scope:"col",children:["Rating",Object(d.jsx)("i",{className:"fas fa-sort-up",onClick:this.sortByRating}),Object(d.jsx)("i",{className:"fas fa-sort-down",onClick:this.sortByRating})]})]})}),Object(d.jsx)("tbody",{children:i.map((function(t){return Object(d.jsxs)("tr",{scope:"row",children:[Object(d.jsx)("td",{children:t.title}),Object(d.jsx)("td",{children:t.genre.name}),Object(d.jsx)("td",{children:t.numberInStock}),Object(d.jsx)("td",{children:t.dailyRentalRate}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{className:"btn btn-danger text-white",onClick:function(){e.deleteEntry(t._id)},children:"Delete"})})]},t._id)}))})]}),Object(d.jsx)("nav",{"aria-label":"...",className:"col-2",children:Object(d.jsx)("ul",{className:"pagination ",children:l.map((function(t){var n=t==c?"page-item active":"page-item";return Object(d.jsx)("li",{className:"page-item","aria-current":"page",children:Object(d.jsx)("li",{className:n,"aria-current":"page",onClick:function(){e.changeCurrentPage(t)},children:Object(d.jsx)("span",{className:"page-link",children:t})})})}))})})]})]})}}]),n}(r.Component);var f=function(){return Object(d.jsx)(b,{})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};c.a.render(Object(d.jsx)(f,{}),document.getElementById("root")),p()}},[[19,1,2]]]);
//# sourceMappingURL=main.c1fa073a.chunk.js.map